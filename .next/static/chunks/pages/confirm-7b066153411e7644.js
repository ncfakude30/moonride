(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[161],{3824:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/confirm",function(){return r(2349)}])},8418:function(e,n,r){"use strict";function t(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var r=[],t=!0,o=!1,c=void 0;try{for(var i,u=e[Symbol.iterator]();!(t=(i=u.next()).done)&&(r.push(i.value),!n||r.length!==n);t=!0);}catch(a){o=!0,c=a}finally{try{t||null==u.return||u.return()}finally{if(o)throw c}}return r}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.default=void 0;var o,c=(o=r(7294))&&o.__esModule?o:{default:o},i=r(6273),u=r(387),a=r(7190);var s={};function f(e,n,r,t){if(e&&i.isLocalURL(n)){e.prefetch(n,r,t).catch((function(e){0}));var o=t&&"undefined"!==typeof t.locale?t.locale:e&&e.locale;s[n+"%"+r+(o?"%"+o:"")]=!0}}var l=function(e){var n,r=!1!==e.prefetch,o=u.useRouter(),l=c.default.useMemo((function(){var n=t(i.resolveHref(o,e.href,!0),2),r=n[0],c=n[1];return{href:r,as:e.as?i.resolveHref(o,e.as):c||r}}),[o,e.href,e.as]),d=l.href,p=l.as,v=e.children,h=e.replace,m=e.shallow,x=e.scroll,b=e.locale;"string"===typeof v&&(v=c.default.createElement("a",null,v));var y=(n=c.default.Children.only(v))&&"object"===typeof n&&n.ref,w=t(a.useIntersection({rootMargin:"200px"}),2),g=w[0],k=w[1],j=c.default.useCallback((function(e){g(e),y&&("function"===typeof y?y(e):"object"===typeof y&&(y.current=e))}),[y,g]);c.default.useEffect((function(){var e=k&&r&&i.isLocalURL(d),n="undefined"!==typeof b?b:o&&o.locale,t=s[d+"%"+p+(n?"%"+n:"")];e&&!t&&f(o,d,p,{locale:n})}),[p,d,k,b,r,o]);var C={ref:j,onClick:function(e){n.props&&"function"===typeof n.props.onClick&&n.props.onClick(e),e.defaultPrevented||function(e,n,r,t,o,c,u,a){("A"!==e.currentTarget.nodeName||!function(e){var n=e.currentTarget.target;return n&&"_self"!==n||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.nativeEvent&&2===e.nativeEvent.which}(e)&&i.isLocalURL(r))&&(e.preventDefault(),null==u&&t.indexOf("#")>=0&&(u=!1),n[o?"replace":"push"](r,t,{shallow:c,locale:a,scroll:u}))}(e,o,d,p,h,m,x,b)},onMouseEnter:function(e){i.isLocalURL(d)&&(n.props&&"function"===typeof n.props.onMouseEnter&&n.props.onMouseEnter(e),f(o,d,p,{priority:!0}))}};if(e.passHref||"a"===n.type&&!("href"in n.props)){var E="undefined"!==typeof b?b:o&&o.locale,Z=o&&o.isLocaleDomain&&i.getDomainLocale(p,E,o&&o.locales,o&&o.domainLocales);C.href=Z||i.addBasePath(i.addLocale(p,E,o&&o.defaultLocale))}return c.default.cloneElement(n,C)};n.default=l},3525:function(e,n,r){"use strict";r.r(n),r.d(n,{Map:function(){return s}});var t=r(5893),o=r(7294),c=r(4995),i=r(6158),u=r.n(i);function a(){var e,n,r=(e=["\n    flex-1 h-1/2\n"],n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}})));return a=function(){return r},r}u().accessToken="pk.eyJ1IjoibmNmY29ycCIsImEiOiJjbTBpY3Z6YnAwN240MmxzOXV2dnNzNzEwIn0.oVdWZdXHm_FMRDU2s4mAxQ";var s=function(e){var n=(0,o.useState)(null),r=n[0],c=n[1];(0,o.useEffect)((function(){navigator.geolocation?navigator.geolocation.getCurrentPosition((function(e){c([e.coords.longitude,e.coords.latitude])}),(function(e){console.error("Error getting user location:",e),c([-99.29011,39.39172])})):(console.error("Geolocation is not supported by this browser."),c([-99.29011,39.39172]))}),[]),(0,o.useEffect)((function(){if(r){var n=new(u().Map)({container:"map",style:"mapbox://styles/drakosi/ckvcwq3rwdw4314o3i2ho8tph",center:r,zoom:12});e.pickupCoordinates&&i(n,e.pickupCoordinates),e.dropoffCoordinates&&i(n,e.dropoffCoordinates),e.pickupCoordinates&&e.dropoffCoordinates&&n.fitBounds([e.pickupCoordinates,e.dropoffCoordinates],{padding:60})}}),[r,e.pickupCoordinates,e.dropoffCoordinates]);var i=function(e,n){(new(u().Marker)).setLngLat(n).addTo(e)};return(0,t.jsx)(f,{id:"map"})};n.default=s;var f=c.Z.div(a())},9892:function(e,n,r){"use strict";r.r(n),r.d(n,{default:function(){return E}});var t=r(5666),o=r.n(t),c=r(5893),i=r(7294),u=r(4995),a=[{imgUrl:"https://i.ibb.co/cyvcpfF/uberx.png",service:"UberX",multiplier:1},{imgUrl:"https://i.ibb.co/YDYMKny/uberxl.png",service:"UberXL",multiplier:1.5},{imgUrl:"https://i.ibb.co/Xx4G91m/uberblack.png",service:"Black",multiplier:2},{imgUrl:"https://i.ibb.co/cyvcpfF/uberx.png",service:"Comfort",multiplier:1.2},{imgUrl:" https://i.ibb.co/1nStPWT/uberblacksuv.png",service:"Black SUV",multiplier:2.8}];function s(e,n,r,t,o,c,i){try{var u=e[c](i),a=u.value}catch(s){return void r(s)}u.done?n(a):Promise.resolve(a).then(t,o)}function f(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var c=e.apply(n,r);function i(e){s(c,t,o,i,u,"next",e)}function u(e){s(c,t,o,i,u,"throw",e)}i(void 0)}))}}function l(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function d(){var e=l(["\n    flex-1 overflow-y-scroll flex flex-col\n"]);return d=function(){return e},e}function p(){var e=l(["\n    text-gray-500 text-center text-xs py-2 border-b\n"]);return p=function(){return e},e}function v(){var e=l(["\n    overflow-y-scroll\n"]);return v=function(){return e},e}function h(){var e=l(["bg-gray-200 border-2 border-blue-500"]);return h=function(){return e},e}function m(){var e=l(["\n    flex p-4 items-center cursor-pointer\n    ","\n"]);return m=function(){return e},e}function x(){var e=l(["\n    h-14 mr-4\n"]);return x=function(){return e},e}function b(){var e=l(["\n    flex-1\n"]);return b=function(){return e},e}function y(){var e=l(["\n    font-medium\n"]);return y=function(){return e},e}function w(){var e=l(["\n    text-xs text-blue-500\n"]);return w=function(){return e},e}function g(){var e=l(["\n    text-sm\n"]);return g=function(){return e},e}var k={ZA:"ZAR",US:"USD"},j=function(e){return k[e]||"USD"},C=f(o().mark((function e(){var n,r;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://ipapi.co/country_code/");case 3:return n=e.sent,e.next=6,n.text();case 6:return r=e.sent,e.abrupt("return",r);case 10:return e.prev=10,e.t0=e.catch(0),console.error("Error fetching country code:",e.t0),e.abrupt("return","US");case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));var E=function(e){var n=e.pickupCoordinates,r=e.dropoffCoordinates,t=e.onSelectRide,u=(0,i.useState)(0),s=u[0],l=u[1],d=(0,i.useState)(null),p=d[0],v=d[1],h=(0,i.useState)("USD"),m=(h[0],h[1]);return(0,i.useEffect)((function(){f(o().mark((function e(){var n;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C();case 2:n=e.sent,m(j(n));case 4:case"end":return e.stop()}}),e)})))()}),[]),(0,i.useEffect)((function(){fetch("https://api.mapbox.com/directions/v5/mapbox/driving/".concat(n[0],",").concat(n[1],";").concat(r[0],",").concat(r[1],"?access_token=pk.eyJ1IjoibmNmY29ycCIsImEiOiJjbTBpY3Z6YnAwN240MmxzOXV2dnNzNzEwIn0.oVdWZdXHm_FMRDU2s4mAxQ")).then((function(e){if(!e.ok)throw new Error("Network response was not ok");return e.json()})).then((function(e){var n;e.routes&&e.routes.length>0&&l((null===(n=e.routes[0])||void 0===n?void 0:n.duration)/60)})).catch((function(e){return console.error("Fetch error:",e)}))}),[n,r]),(0,c.jsxs)(Z,{children:[(0,c.jsx)(N,{children:"Choose a ride, or swipe up for more"}),(0,c.jsx)(U,{children:a.map((function(e,n){return(0,c.jsxs)(S,{onClick:function(){return function(e){v(e),t(e)}(e)},isSelected:(null===p||void 0===p?void 0:p.service)===e.service,children:[(0,c.jsx)(_,{src:e.imgUrl}),(0,c.jsxs)(O,{children:[(0,c.jsx)(z,{children:e.service}),(0,c.jsx)(L,{children:"5 min away"})]}),(0,c.jsxs)(I,{children:["R",(s*e.multiplier).toFixed(2)]})]},n)}))})]})},Z=u.Z.div(d()),N=u.Z.div(p()),U=u.Z.div(v()),S=u.Z.div(m(),(function(e){return e.isSelected&&(0,u.Z)(h())})),_=u.Z.img(x()),O=u.Z.div(b()),z=u.Z.div(y()),L=u.Z.div(w()),I=u.Z.div(g())},2349:function(e,n,r){"use strict";r.r(n);var t=r(5666),o=r.n(t),c=r(5893),i=r(7294),u=r(4995),a=r(3525),s=r(1163),f=r(9892),l=r(1664),d=r(5675);function p(e,n,r,t,o,c,i){try{var u=e[c](i),a=u.value}catch(s){return void r(s)}u.done?n(a):Promise.resolve(a).then(t,o)}function v(e){return function(){var n=this,r=arguments;return new Promise((function(t,o){var c=e.apply(n,r);function i(e){p(c,t,o,i,u,"next",e)}function u(e){p(c,t,o,i,u,"throw",e)}i(void 0)}))}}function h(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function m(){var e=h(["\n    flex h-screen flex-col\n"]);return m=function(){return e},e}function x(){var e=h(["\n    flex flex-col flex-1 h-1/2\n"]);return x=function(){return e},e}function b(){var e=h(["\n    border-t-2\n"]);return b=function(){return e},e}function y(){var e=h(["\n    bg-black text-white my-4 mx-4 py-4 text-center text-xl\n"]);return y=function(){return e},e}function w(){var e=h(["\n    absolute rounded-full top-4 left-4 z-10 bg-white shadow-md cursor-pointer\n"]);return w=function(){return e},e}function g(){var e=h(["\n    relative h-12 w-12\n"]);return g=function(){return e},e}n.default=function(){var e=(0,s.useRouter)(),n=e.query,r=n.pickup,t=n.dropoff,u=(0,i.useState)([0,0]),p=u[0],h=u[1],m=(0,i.useState)([0,0]),x=m[0],b=m[1],y=(0,i.useState)(!0),w=y[0],g=y[1],U=(0,i.useState)(null),S=U[0],_=U[1];(0,i.useEffect)((function(){r&&t&&(g(!0),O(r),z(t))}),[r,t]),(0,i.useEffect)((function(){p.length>0&&x.length>0&&g(!1)}),[p,x]);var O=v(o().mark((function e(n){var r,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(n,".json?")+new URLSearchParams({access_token:"pk.eyJ1IjoibmNmY29ycCIsImEiOiJjbTBpY3Z6YnAwN240MmxzOXV2dnNzNzEwIn0.oVdWZdXHm_FMRDU2s4mAxQ",limit:1}));case 3:return r=e.sent,e.next=6,r.json();case 6:(t=e.sent).features.length>0?h(t.features[0].center):console.error("No results found for pickup location"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error fetching pickup coordinates:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),z=v(o().mark((function e(n){var r,t;return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(n,".json?")+new URLSearchParams({access_token:"pk.eyJ1IjoibmNmY29ycCIsImEiOiJjbTBpY3Z6YnAwN240MmxzOXV2dnNzNzEwIn0.oVdWZdXHm_FMRDU2s4mAxQ",limit:1}));case 3:return r=e.sent,e.next=6,r.json();case 6:(t=e.sent).features.length>0?b(t.features[0].center):console.error("No results found for dropoff location"),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(0),console.error("Error fetching dropoff coordinates:",e.t0);case 13:case"end":return e.stop()}}),e,null,[[0,10]])}))),L=function(n){_(n),e.push({pathname:"/payment",query:{pickup:"".concat(p[0],",").concat(p[1]),dropoff:"".concat(x[0],",").concat(x[1]),ride:JSON.stringify(n)}})};return w?(0,c.jsx)("p",{children:"Loading..."}):(0,c.jsxs)(k,{children:[(0,c.jsx)(Z,{children:(0,c.jsx)(l.default,{href:"/search",children:(0,c.jsx)(N,{children:(0,c.jsx)(d.default,{src:"https://img.icons8.com/ios-filled/50/000000/left.png",alt:"Back",layout:"fill"})})})}),(0,c.jsx)(a.default,{pickupCoordinates:p,dropoffCoordinates:x}),(0,c.jsxs)(j,{children:[(0,c.jsx)(f.default,{pickupCoordinates:p,dropoffCoordinates:x,onSelectRide:L}),(0,c.jsx)(C,{children:(0,c.jsx)(E,{onClick:function(){return L(S)},children:"Confirm UberX"})})]})]})};var k=u.Z.div(m()),j=u.Z.div(x()),C=u.Z.div(b()),E=u.Z.div(y()),Z=u.Z.div(w()),N=u.Z.div(g())},1664:function(e,n,r){e.exports=r(8418)},1163:function(e,n,r){e.exports=r(387)}},function(e){e.O(0,[634,995,675,774,888,179],(function(){return n=3824,e(e.s=n);var n}));var n=e.O();_N_E=n}]);