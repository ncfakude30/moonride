(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[252],{5553:function(e,n,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/payment",function(){return r(7692)}])},7692:function(e,n,r){"use strict";r.r(n);var t=r(5666),c=r.n(t),i=r(5893),u=r(1163),o=r(7294),s=r(4995);function a(e,n,r,t,c,i,u){try{var o=e[i](u),s=o.value}catch(a){return void r(a)}o.done?n(s):Promise.resolve(s).then(t,c)}function f(e){return function(){var n=this,r=arguments;return new Promise((function(t,c){var i=e.apply(n,r);function u(e){a(i,t,c,u,o,"next",e)}function o(e){a(i,t,c,u,o,"throw",e)}u(void 0)}))}}function l(e,n){return n||(n=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(n)}}))}function p(){var e=l(["\n    flex flex-col items-center justify-center h-screen p-4\n"]);return p=function(){return e},e}function d(){var e=l(["\n    text-2xl font-bold mb-4\n"]);return d=function(){return e},e}function h(){var e=l(["\n    mb-4\n"]);return h=function(){return e},e}function x(){var e=l(["\n    bg-black text-white py-2 px-4 rounded\n"]);return x=function(){return e},e}function m(){var e=l(["\n    text-green-500 mt-4\n"]);return m=function(){return e},e}function v(){var e=l(["\n    text-red-500 mt-4\n"]);return v=function(){return e},e}n.default=function(){var e=(0,u.useRouter)(),n=e.query,r=n.pickup,t=n.dropoff,s=n.ride,a=(0,o.useState)(null),l=a[0],p=a[1],d=(0,o.useState)(""),h=d[0],x=d[1],m=(0,o.useState)(""),v=m[0],P=m[1],y=(0,o.useState)(null),E=y[0],N=y[1];(0,o.useEffect)((function(){s&&p(JSON.parse(s)),r&&t&&(O(r,"pickup"),O(t,"dropoff"))}),[s,r,t]);var O=f(c().mark((function e(n,r){var t,i,u;return c().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://api.mapbox.com/geocoding/v5/mapbox.places/".concat(n,".json?")+new URLSearchParams({access_token:"pk.eyJ1IjoibmNmY29ycCIsImEiOiJjbTBpY3Z6YnAwN240MmxzOXV2dnNzNzEwIn0.oVdWZdXHm_FMRDU2s4mAxQ",limit:1}));case 3:return t=e.sent,e.next=6,t.json();case 6:i=e.sent,u=i.features.length>0?i.features[0].place_name:"Unknown location","pickup"===r?x(u):"dropoff"===r&&P(u),e.next=15;break;case 11:e.prev=11,e.t0=e.catch(0),console.error("Error fetching place name:",e.t0),"pickup"===r?x("Error fetching location"):"dropoff"===r&&P("Error fetching location");case 15:case"end":return e.stop()}}),e,null,[[0,11]])}))),Z=f(c().mark((function n(){return c().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,new Promise((function(e){return setTimeout(e,2e3)}));case 3:N("success"),setTimeout((function(){e.push("/")}),1e3),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),N("failure");case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return(0,i.jsxs)(j,{children:[(0,i.jsx)(w,{children:"Payment"}),(0,i.jsxs)(k,{children:[(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Pickup:"})," ",h]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Dropoff:"})," ",v]}),l&&(0,i.jsxs)("div",{children:[(0,i.jsx)("img",{src:l.imgUrl,alt:l.service}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Service:"})," ",l.service]}),(0,i.jsxs)("p",{children:[(0,i.jsx)("strong",{children:"Price:"})," ",10*l.multiplier]})," "]}),"success"===E&&(0,i.jsx)(g,{children:"Payment successful! Redirecting to home..."}),"failure"===E&&(0,i.jsx)(_,{children:"Payment failed. Please try again."})]}),(0,i.jsx)(b,{onClick:Z,children:"Confirm Payment"})]})};var j=s.Z.div(p()),w=s.Z.h1(d()),k=s.Z.div(h()),b=s.Z.button(x()),g=s.Z.p(m()),_=s.Z.p(v())},1163:function(e,n,r){e.exports=r(387)}},function(e){e.O(0,[995,774,888,179],(function(){return n=5553,e(e.s=n);var n}));var n=e.O();_N_E=n}]);